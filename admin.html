<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Admin Queue</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: system-ui;
  background: linear-gradient(135deg,#667eea,#764ba2);
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  margin:0;
}
.card {
  background:#fff;
  padding:24px;
  border-radius:16px;
  width:320px;
  text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}
input,button {
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:16px;
}
button {
  border:none;
  cursor:pointer;
}
.login-btn { background:#4f46e5; color:#fff; }
.next { background:#22c55e; color:#fff; }
.skip { background:#ef4444; color:#fff; }
.queue {
  font-size:48px;
  margin:20px 0;
  font-weight:bold;
  color:#4f46e5;
}
.status {
  font-size:14px;
  color:#666;
}
</style>
</head>

<body>

<div class="card">

  <!-- LOGIN -->
  <div id="login">
    <h2>üîê Admin Login</h2>
    <input id="username" placeholder="username">
    <input id="password" type="password" placeholder="password">
    <button class="login-btn" onclick="login()">Login</button>
  </div>

  <!-- ADMIN -->
  <div id="admin" style="display:none;">
    <h2>üé´ Queue</h2>
    <div class="queue" id="queue">-</div>
    <button class="next" onclick="nextQueue()">‚ñ∂ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏¥‡∏ß‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
    <button class="skip" onclick="skipQueue()">‚è≠ ‡∏Ç‡πâ‡∏≤‡∏°‡∏Ñ‡∏¥‡∏ß</button>
    <div class="status" id="status"></div>
  </div>

</div>

<script>
const GAS_URL = "https://script.google.com/macros/s/XXXXXXXX/exec";
let token = "";

function setStatus(msg){
  document.getElementById("status").innerText = msg;
}

function login(){
  fetch(GAS_URL,{
    method:"POST",
    body:JSON.stringify({
      action:"login",
      username:username.value,
      password:password.value
    })
  })
  .then(r=>r.json())
  .then(d=>{
    if(d.status==="ok"){
      token = d.token;
      login.style.display="none";
      admin.style.display="block";
    }else{
      alert("‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
    }
  });
}

function nextQueue(){ send("next"); }
function skipQueue(){ send("skip"); }

function send(action){
  setStatus("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£...");
  fetch(GAS_URL,{
    method:"POST",
    body:JSON.stringify({ action, token })
  })
  .then(r=>r.json())
  .then(d=>{
    if(d.queue !== null){
      queue.innerText = d.queue ?? "-";
      setStatus("‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
    }else{
      setStatus("‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏¥‡∏ß‡πÅ‡∏•‡πâ‡∏ß");
    }
  })
  .catch(()=>{
    setStatus("‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");
  });
}
</script>

</body>
</html>
