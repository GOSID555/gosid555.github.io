<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: sans-serif; background:#f5f5f5; }
    .card { background:#fff; padding:20px; margin:20px auto; width:400px; border-radius:10px; }
    button { padding:10px; margin:5px; }
  </style>
</head>
<body>

<div class="card" id="login">
  <h2>Admin Login</h2>
  <input id="user" placeholder="username"><br><br>
  <input id="pass" type="password" placeholder="password"><br><br>
  <button onclick="login()">Login</button>
</div>

<div class="card" id="dashboard" style="display:none">
  <h2>Queue Dashboard</h2>
  <button onclick="nextQueue()">▶ เรียกคิวถัดไป</button>
  <pre id="queue"></pre>
</div>

<script>
const GAS_URL = "https://script.google.com/macros/s/AKfycbw6arQXG6g2EW7QmNVtJ3np5yGbfYBwNS5nlPcaocBOtZcXL4crH6NwV0XP_0r7UmNf/exec";

function login() {
  fetch(GAS_URL, {
    method:"POST",
    body:JSON.stringify({
      action:"login",
      user: user.value,
      pass: pass.value
    })
  }).then(r=>r.json()).then(res=>{
    if(res.status==="ok"){
      login.style.display="none";
      dashboard.style.display="block";
      loadQueue();
    } else {
      alert("Login fail");
    }
  })
}

function loadQueue(){
  fetch(GAS_URL,{
    method:"POST",
    body:JSON.stringify({action:"getQueue"})
  }).then(r=>r.json()).then(d=>{
    queue.innerText = JSON.stringify(d,null,2);
  })
}

function nextQueue(){
  fetch(GAS_URL,{
    method:"POST",
    body:JSON.stringify({action:"nextQueue"})
  }).then(()=>loadQueue());
}
</script>

</body>
</html>
