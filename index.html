<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</title>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
<h2>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</h2>
<button onclick="reserve()">‡∏Å‡∏î‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</button>
<p id="result"></p>

<script>
const liffId = "2008930440-jI56TpIn";
const gasUrl = "https://script.google.com/macros/s/AKfycbwWp1wxQj-Ub_C36RWDVp3-Ao87EH4jQNjAy98GscgP8PwhwSuT6H5VqRjl9V_o99yv6A/exec";

async function reserve() {
  await liff.init({ liffId });
  const profile = await liff.getProfile();

  const res = await fetch(gasUrl, {
    method: "POST",
    body: JSON.stringify({
      userId: profile.userId,
      name: profile.displayName
    })
  });

  const data = await res.json();
  document.getElementById("result").innerText =
    `üé´ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏µ‡πà ${data.queue} | ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å ${data.left} ‡∏Ñ‡∏¥‡∏ß`;
}
</script>
</body>
</html>
